---
apiVersion: quarks.cloudfoundry.org/v1alpha1
kind: QuarksSecret
metadata:
  name: host-key
  namespace: concourse
spec:
  type: ssh
  secretName: host-key

---
apiVersion: quarks.cloudfoundry.org/v1alpha1
kind: QuarksSecret
metadata:
  name: worker-key
  namespace: concourse
spec:
  type: ssh
  secretName: worker-key

---
apiVersion: quarks.cloudfoundry.org/v1alpha1
kind: QuarksSecret
metadata:
  name: session-signing-key
  namespace: concourse
spec:
  type: rsa
  secretName: session-signing-key

---
apiVersion: quarks.cloudfoundry.org/v1alpha1
kind: QuarksSecret
metadata:
  name: local-user
  namespace: concourse
spec:
  type: basic-auth
  secretName: local-user

---
apiVersion: quarks.cloudfoundry.org/v1alpha1
kind: QuarksSecret
metadata:
  name: templated-concourse-web
  namespace: concourse
spec:
  type: templatedconfig
  secretName: concourse-web
  request:
    templatedConfig:
      type: helm
      templates:
        host-key: "{{.Values.hostKey}}"
        session-signing-key: "{{.Values.sessionSigningKey}}"
        worker-key-pub: "{{.Values.workerKeyPub}}"
        local-users: "{{.Values.localUserName}}:{{.Values.localUserPassword}}"
      values:
        hostKey:
          name: "host-key"
          key: "private_key"
        sessionSigningKey:
          name: "session-signing-key"
          key: "private_key"
        workerKeyPub:
          name: "worker-key"
          key: "public_key"
        localUserName:
          name: "local-user"
          key: "username"
        localUserPassword:
          name: "local-user"
          key: "password"

---
apiVersion: quarks.cloudfoundry.org/v1alpha1
kind: QuarksSecret
metadata:
  name: templated-concourse-worker
  namespace: concourse
spec:
  type: templatedconfig
  secretName: concourse-worker
  request:
    templatedConfig:
      type: helm
      templates:
        host-key-pub: "{{.Values.hostKeyPub}}"
        worker-key: "{{.Values.workerKey}}"
      values:
        hostKeyPub:
          name: "host-key"
          key: "public_key"
        workerKey:
          name: "worker-key"
          key: "private_key"
